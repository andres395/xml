<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.19"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>F´ Flight Software - C/C++ Documentation: Drv/LinuxSerialDriver/LinuxSerialDriverComponentImpl.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">F´ Flight Software - C/C++ Documentation
   &#160;<span id="projectnumber">NASA-v1.5.0</span>
   </div>
   <div id="projectbrief">A framework for building embedded system applications to NASA flight quality standards.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.19 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_linux_serial_driver_component_impl_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">LinuxSerialDriverComponentImpl.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="linux_serial_driver_component_impl_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// ======================================================================</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// \title  LinuxSerialDriverImpl.cpp</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// \author tcanham</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// \brief  cpp file for LinuxSerialDriver component implementation class</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// \copyright</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// Copyright 2009-2015, by the California Institute of Technology.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// ALL RIGHTS RESERVED.  United States Government Sponsorship</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// acknowledged.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// ======================================================================</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="linux_serial_driver_component_impl_8hpp.html">Drv/LinuxSerialDriver/LinuxSerialDriverComponentImpl.hpp</a>&gt;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="basic_types_8hpp.html">Fw/Types/BasicTypes.hpp</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="eighty_char_string_8hpp.html">Fw/Types/EightyCharString.hpp</a>&gt;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;unistd.h&gt;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;time.h&gt;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160; </div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;sys/types.h&gt;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;sys/stat.h&gt;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;fcntl.h&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;termios.h&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;errno.h&gt;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160; </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">//#define DEBUG_PRINT(x,...) printf(x,##__VA_ARGS__); fflush(stdout)</span></div>
<div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="linux_serial_driver_component_impl_8cpp.html#a9e21a2a88f554186e2b2380b00eab944">   29</a></span>&#160;<span class="preprocessor">#define DEBUG_PRINT(x,...)</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespace_drv.html">Drv</a> {</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <span class="comment">// ----------------------------------------------------------------------</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="comment">// Construction, initialization, and destruction</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="comment">// ----------------------------------------------------------------------</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160; </div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="class_drv_1_1_linux_serial_driver_component_impl.html#a3c0a0e8d9499f15b5f35bc051123b0a6">   37</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a3c0a0e8d9499f15b5f35bc051123b0a6">LinuxSerialDriverComponentImpl::open</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> device, <a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a9dad2b92cd0d996fa55f89aac44cb791">UartBaudRate</a> baud, <a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#aad14e14819d2e63364bf648587444389">UartFlowControl</a> fc, <a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#ae50cdaf949dec24d4f44d2dfb416cafe">UartParity</a> parity, <span class="keywordtype">bool</span> block) {</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;      <span class="comment">/*</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">       Their config:</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">       2-wire UART on BLSP2 is accessible via /dev/ttyHS0</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">       2-wire UART on BLSP9 is accessible via /dev/ttyHS3</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">       4-wire UART on BLSP6 is accessible via /dev/ttyHS2</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">       Our config:</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">       tty-1 bam-2 2-wire</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">       tty-2 bam-6 4-wire</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">       tty-3 bam-9 4-wire</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">       */</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;      <span class="comment">// TODO remove printf</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;      <a class="code" href="basic_types_8hpp.html#ae2c29dc7dc30247eb4144d3d058d1852">NATIVE_INT_TYPE</a> fd;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;      <a class="code" href="basic_types_8hpp.html#ae2c29dc7dc30247eb4144d3d058d1852">NATIVE_INT_TYPE</a> stat;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;      this-&gt;<a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a4c13a4310cc6ad301424b9ef80ce0dd9">m_device</a> = device;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;      <a class="code" href="linux_serial_driver_component_impl_8cpp.html#a9e21a2a88f554186e2b2380b00eab944">DEBUG_PRINT</a>(<span class="stringliteral">&quot;Opening UART device %s\n&quot;</span>, device);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;      <span class="comment">// TODO cant use O_NDELAY and block (it is same as O_NONBLOCK), so removing NDELAY for now</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;      <span class="comment">/*</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">       The O_NOCTTY flag tells UNIX that this program doesn&#39;t want to be the &quot;controlling terminal&quot; for that port. If you don&#39;t specify this then any input (such as keyboard abort signals and so forth) will affect your process. Programs like getty(1M/8) use this feature when starting the login process, but normally a user program does not want this behavior.</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">       The O_NDELAY flag tells UNIX that this program doesn&#39;t care what state the DCD signal line is in - whether the other end of the port is up and running. If you do not specify this flag, your process will be put to sleep until the DCD signal line is the space voltage.</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">       */</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;      fd = <a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a3c0a0e8d9499f15b5f35bc051123b0a6">::open</a>(device, O_RDWR | O_NOCTTY); <span class="comment">// | O_NDELAY);</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      <span class="comment">//fd = open(device, O_RDWR | O_NONBLOCK | O_SYNC);</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;      <span class="keywordflow">if</span> (fd == -1) {</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;          <a class="code" href="linux_serial_driver_component_impl_8cpp.html#a9e21a2a88f554186e2b2380b00eab944">DEBUG_PRINT</a>(<span class="stringliteral">&quot;open UART device %s failed.\n&quot;</span>, device);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;          <a class="code" href="class_fw_1_1_log_string_arg.html">Fw::LogStringArg</a> _arg = device;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;          <a class="code" href="class_fw_1_1_log_string_arg.html">Fw::LogStringArg</a> _err = strerror(errno);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;          this-&gt;log_WARNING_HI_DR_OpenError(_arg,this-&gt;<a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a6714386b0a5d957d829e883e0f677ab2">m_fd</a>,_err);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;          <a class="code" href="linux_serial_driver_component_impl_8cpp.html#a9e21a2a88f554186e2b2380b00eab944">DEBUG_PRINT</a>(<span class="stringliteral">&quot;Successfully opened UART device %s fd %d\n&quot;</span>, device, fd);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      }</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      this-&gt;<a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a6714386b0a5d957d829e883e0f677ab2">m_fd</a> = fd;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      <span class="comment">// Configure blocking reads</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      <span class="keyword">struct </span>termios cfg;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      stat = tcgetattr(fd,&amp;cfg);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      <span class="keywordflow">if</span> (-1 == stat) {</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;          <a class="code" href="linux_serial_driver_component_impl_8cpp.html#a9e21a2a88f554186e2b2380b00eab944">DEBUG_PRINT</a>(<span class="stringliteral">&quot;tcgetattr failed: (%d): %s\n&quot;</span>,stat,strerror(errno));</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;          close(fd);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;          <a class="code" href="class_fw_1_1_log_string_arg.html">Fw::LogStringArg</a> _arg = device;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;          <a class="code" href="class_fw_1_1_log_string_arg.html">Fw::LogStringArg</a> _err = strerror(errno);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;          this-&gt;log_WARNING_HI_DR_OpenError(_arg,fd,_err);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;          <a class="code" href="linux_serial_driver_component_impl_8cpp.html#a9e21a2a88f554186e2b2380b00eab944">DEBUG_PRINT</a>(<span class="stringliteral">&quot;tcgetattr passed.\n&quot;</span>);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      }</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <span class="comment">/*</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">       If MIN &gt; 0 and TIME = 0, MIN sets the number of characters to receive before the read is satisfied. As TIME is zero, the timer is not used.</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">       If MIN = 0 and TIME &gt; 0, TIME serves as a timeout value. The read will be satisfied if a single character is read, or TIME is exceeded (t = TIME *0.1 s). If TIME is exceeded, no character will be returned.</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">       If MIN &gt; 0 and TIME &gt; 0, TIME serves as an inter-character timer. The read will be satisfied if MIN characters are received, or the time between two characters exceeds TIME. The timer is restarted every time a character is received and only becomes active after the first character has been received.</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">       If MIN = 0 and TIME = 0, read will be satisfied immediately. The number of characters currently available, or the number of characters requested will be returned. According to Antonino (see contributions), you could issue a fcntl(fd, F_SETFL, FNDELAY); before reading to get the same result.</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">       */</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      <span class="comment">// wait for at least 1 byte for 1 second</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      <span class="comment">// TODO VMIN should be 0 when using VTIME, and then it would give the timeout behavior Tim wants</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      cfg.c_cc[VMIN] = 0; <span class="comment">// TODO back to 0</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      cfg.c_cc[VTIME] = 10; <span class="comment">// 1 sec, TODO back to 10</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      stat = tcsetattr(fd,TCSANOW,&amp;cfg);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      <span class="keywordflow">if</span> (-1 == stat) {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;          <a class="code" href="linux_serial_driver_component_impl_8cpp.html#a9e21a2a88f554186e2b2380b00eab944">DEBUG_PRINT</a>(<span class="stringliteral">&quot;tcsetattr failed: (%d): %s\n&quot;</span>,stat,strerror(errno));</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;          close(fd);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;          <a class="code" href="class_fw_1_1_log_string_arg.html">Fw::LogStringArg</a> _arg = device;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;          <a class="code" href="class_fw_1_1_log_string_arg.html">Fw::LogStringArg</a> _err = strerror(errno);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;          this-&gt;log_WARNING_HI_DR_OpenError(_arg,fd,_err);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;          <a class="code" href="linux_serial_driver_component_impl_8cpp.html#a9e21a2a88f554186e2b2380b00eab944">DEBUG_PRINT</a>(<span class="stringliteral">&quot;tcsetattr passed.\n&quot;</span>);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      <span class="comment">// Set flow control</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      <span class="keywordflow">if</span> (fc == <a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a2ba16e50af2df9aa1c9190b1e34ebeb9a814646e41796706bb76271edbb5ea6a5">HW_FLOW</a>) {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;          <span class="keyword">struct </span>termios t;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;          <span class="keywordtype">int</span> stat = tcgetattr(fd, &amp;t);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;          <span class="keywordflow">if</span> (-1 == stat) {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;              <a class="code" href="linux_serial_driver_component_impl_8cpp.html#a9e21a2a88f554186e2b2380b00eab944">DEBUG_PRINT</a>(<span class="stringliteral">&quot;tcgetattr UART fd %d failed\n&quot;</span>, fd);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;              close(fd);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;              <a class="code" href="class_fw_1_1_log_string_arg.html">Fw::LogStringArg</a> _arg = device;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;              <a class="code" href="class_fw_1_1_log_string_arg.html">Fw::LogStringArg</a> _err = strerror(errno);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;              this-&gt;log_WARNING_HI_DR_OpenError(_arg,fd,_err);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;              <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;          }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;          <span class="comment">// modify flow control flags</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;          t.c_cflag |= CRTSCTS;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;          stat = tcsetattr(fd, TCSANOW, &amp;t);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;          <span class="keywordflow">if</span> (-1 == stat) {</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;              <a class="code" href="linux_serial_driver_component_impl_8cpp.html#a9e21a2a88f554186e2b2380b00eab944">DEBUG_PRINT</a>(<span class="stringliteral">&quot;tcsetattr UART fd %d failed\n&quot;</span>, fd);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;              close(fd);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;              <a class="code" href="class_fw_1_1_log_string_arg.html">Fw::LogStringArg</a> _arg = device;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;              <a class="code" href="class_fw_1_1_log_string_arg.html">Fw::LogStringArg</a> _err = strerror(errno);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;              this-&gt;log_WARNING_HI_DR_OpenError(_arg,fd,_err);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;              <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;          }</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <a class="code" href="basic_types_8hpp.html#ae2c29dc7dc30247eb4144d3d058d1852">NATIVE_INT_TYPE</a> relayRate = B0;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <span class="keywordflow">switch</span> (baud) {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;          <span class="comment">// TODO add more as needed</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a84c9b7f8a8e41db9575734e965a3a99ea84ff1fc2f68ed8b9e02a7392c5d38561">BAUD_9600</a>:</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;              relayRate = B9600;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a84c9b7f8a8e41db9575734e965a3a99eaca9c236f722c9ae71b7019271af2fe79">BAUD_19200</a>:</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;              relayRate = B19200;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a84c9b7f8a8e41db9575734e965a3a99ea8b7fbb9e29befd0554faaa1bac3bb5df">BAUD_38400</a>:</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;              relayRate = B38400;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a84c9b7f8a8e41db9575734e965a3a99eae4e3d17298b35de0dde561fd7caf19b2">BAUD_57600</a>:</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;              relayRate = B57600;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a84c9b7f8a8e41db9575734e965a3a99ea4b1215baf0cd6b0c01d19e9f574cd3b5">BAUD_115K</a>:</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;              relayRate = B115200;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a84c9b7f8a8e41db9575734e965a3a99ea432d51514e85797bdbab179d8145ae7a">BAUD_230K</a>:</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;              relayRate = B230400;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="preprocessor">#if defined TGT_OS_TYPE_LINUX</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a84c9b7f8a8e41db9575734e965a3a99eaa26ac5c5d7e64938e1df8fd5e2b437c8">BAUD_460K</a>:</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;              relayRate = B460800;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a84c9b7f8a8e41db9575734e965a3a99eaaccbf6218fb9fd4750cbdd294c198b03">BAUD_921K</a>:</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;              relayRate = B921600;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;          <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;              <a class="code" href="assert_8hpp.html#ae203ae2022a5f92eea0ceb85a0d62c3c">FW_ASSERT</a>(0,baud);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      }</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      <span class="keyword">struct </span>termios newtio;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      stat = tcgetattr(fd, &amp;newtio);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      <span class="keywordflow">if</span> (-1 == stat) {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;          <a class="code" href="linux_serial_driver_component_impl_8cpp.html#a9e21a2a88f554186e2b2380b00eab944">DEBUG_PRINT</a>(<span class="stringliteral">&quot;tcgetattr UART fd %d failed\n&quot;</span>, fd);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;          close(fd);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;          <a class="code" href="class_fw_1_1_log_string_arg.html">Fw::LogStringArg</a> _arg = device;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;          <a class="code" href="class_fw_1_1_log_string_arg.html">Fw::LogStringArg</a> _err = strerror(errno);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;          this-&gt;log_WARNING_HI_DR_OpenError(_arg,fd,_err);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      }</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      <span class="comment">// CS8 = 8 data bits, CLOCAL = Local line, CREAD = Enable Reciever</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <span class="comment">// TODO PARENB for parity bit</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      <span class="comment">/*</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">        Even parity (7E1):</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">        options.c_cflag |= PARENB</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">        options.c_cflag &amp;= ~PARODD</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">        options.c_cflag &amp;= ~CSTOPB</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">        options.c_cflag &amp;= ~CSIZE;</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">        options.c_cflag |= CS7;</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">        Odd parity (7O1):</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">        options.c_cflag |= PARENB</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">        options.c_cflag |= PARODD</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">        options.c_cflag &amp;= ~CSTOPB</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">        options.c_cflag &amp;= ~CSIZE;</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">        options.c_cflag |= CS7;</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">       */</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      newtio.c_cflag = CS8 | CLOCAL | CREAD;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <span class="keywordflow">switch</span> (parity) {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#ad9452c02c517a8491be9e7b7eb8f7f8ea9fd0804c886dfcb648119861e3d0bfab">PARITY_ODD</a>:</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;              newtio.c_cflag |= (PARENB | PARODD) ;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#ad9452c02c517a8491be9e7b7eb8f7f8ea25598e2120a13d9d5b30f2c9bd037931">PARITY_EVEN</a>:</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;              newtio.c_cflag |= PARENB ;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#ad9452c02c517a8491be9e7b7eb8f7f8ea79d2c16eefbf8084cbb91cf929430a49">PARITY_NONE</a>:</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;              newtio.c_cflag &amp;= ~PARENB ;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;          <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;              <a class="code" href="assert_8hpp.html#ae203ae2022a5f92eea0ceb85a0d62c3c">FW_ASSERT</a>(0,parity);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160; </div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      <span class="comment">// Set baud rate:</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      stat = cfsetispeed(&amp;newtio, relayRate);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      stat = cfsetospeed(&amp;newtio, relayRate);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160; </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <span class="comment">// Raw output:</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      newtio.c_oflag = 0;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <span class="comment">// set input mode (non-canonical, no echo,...)</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      newtio.c_lflag = 0;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <span class="comment">// TODO if parity, then do input parity too</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      <span class="comment">//options.c_iflag |=INPCK;</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      newtio.c_iflag = INPCK;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      <span class="comment">// Flush old data:</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      (void) tcflush(fd, TCIFLUSH);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      <span class="comment">// Set attributes:</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      stat = tcsetattr(fd,TCSANOW,&amp;newtio);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      <span class="keywordflow">if</span> (-1 == stat) {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;          <a class="code" href="linux_serial_driver_component_impl_8cpp.html#a9e21a2a88f554186e2b2380b00eab944">DEBUG_PRINT</a>(<span class="stringliteral">&quot;tcsetattr UART fd %d failed\n&quot;</span>, fd);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;          close(fd);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;          <a class="code" href="class_fw_1_1_log_string_arg.html">Fw::LogStringArg</a> _arg = device;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;          <a class="code" href="class_fw_1_1_log_string_arg.html">Fw::LogStringArg</a> _err = strerror(errno);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;          this-&gt;log_WARNING_HI_DR_OpenError(_arg,fd,_err);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160; </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      <span class="comment">// All done!</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <a class="code" href="class_fw_1_1_log_string_arg.html">Fw::LogStringArg</a> _arg = device;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      this-&gt;<a class="code" href="class_drv_1_1_linux_serial_driver_component_base.html#ae852e2c7c65641db20affa69bb9314ab">log_ACTIVITY_HI_DR_PortOpened</a>(_arg);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  }</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; </div>
<div class="line"><a name="l00266"></a><span class="lineno"><a class="line" href="class_drv_1_1_linux_serial_driver_component_impl.html#a1a10f72c4a2bcbb7c214296da5b4c87a">  266</a></span>&#160;  <a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a1a10f72c4a2bcbb7c214296da5b4c87a">LinuxSerialDriverComponentImpl ::</a></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a1a10f72c4a2bcbb7c214296da5b4c87a">    ~LinuxSerialDriverComponentImpl</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  {</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <span class="keywordflow">if</span> (this-&gt;<a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a6714386b0a5d957d829e883e0f677ab2">m_fd</a> != -1) {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;          <a class="code" href="linux_serial_driver_component_impl_8cpp.html#a9e21a2a88f554186e2b2380b00eab944">DEBUG_PRINT</a>(<span class="stringliteral">&quot;Closing UART device %d\n&quot;</span>, this-&gt;<a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a6714386b0a5d957d829e883e0f677ab2">m_fd</a>);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160; </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;          (void) close(this-&gt;<a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a6714386b0a5d957d829e883e0f677ab2">m_fd</a>);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  }</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="comment">// ----------------------------------------------------------------------</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="comment">// Handler implementations for user-defined typed input ports</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="comment">// ----------------------------------------------------------------------</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="class_drv_1_1_linux_serial_driver_component_base.html#ad8f82955f091f42b4c6685278eb586a9">LinuxSerialDriverComponentImpl ::</a></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<a class="code" href="class_drv_1_1_linux_serial_driver_component_base.html#ad8f82955f091f42b4c6685278eb586a9">    serialSend_handler</a>(</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="keyword">const</span> <a class="code" href="basic_types_8hpp.html#ae2c29dc7dc30247eb4144d3d058d1852">NATIVE_INT_TYPE</a> portNum,</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <a class="code" href="class_fw_1_1_buffer.html">Fw::Buffer</a> &amp;serBuffer</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    )</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <span class="keywordflow">if</span> (this-&gt;<a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a6714386b0a5d957d829e883e0f677ab2">m_fd</a> == -1) {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;          <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      }</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* data = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(<a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a01d2f279af50161b1feb87fcd5ce8109">serBuffer</a>.<a class="code" href="class_fw_1_1_buffer.html#aa782cd9789d4c954840ba7abab38ba08">getdata</a>());</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      <a class="code" href="basic_types_8hpp.html#ae2c29dc7dc30247eb4144d3d058d1852">NATIVE_INT_TYPE</a> xferSize = <a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a01d2f279af50161b1feb87fcd5ce8109">serBuffer</a>.<a class="code" href="class_fw_1_1_buffer.html#a730367e751602c9ef76bdcb37c9097d8">getsize</a>();</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      <a class="code" href="basic_types_8hpp.html#ae2c29dc7dc30247eb4144d3d058d1852">NATIVE_INT_TYPE</a> stat = ::write(this-&gt;<a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a6714386b0a5d957d829e883e0f677ab2">m_fd</a>,data,xferSize);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <span class="comment">// TODO no need to delay for writes b/c the write blocks</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <span class="comment">// not sure if it will block until everything is transmitted, but seems to</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <span class="keywordflow">if</span> (-1 == stat || stat != xferSize) {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;          <a class="code" href="class_fw_1_1_log_string_arg.html">Fw::LogStringArg</a> _arg = this-&gt;<a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a4c13a4310cc6ad301424b9ef80ce0dd9">m_device</a>;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;          this-&gt;<a class="code" href="class_drv_1_1_linux_serial_driver_component_base.html#aa8dcb38efea8d4a1ee2df7739cfaf0c5">log_WARNING_HI_DR_WriteError</a>(_arg,stat);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  }</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno"><a class="line" href="class_drv_1_1_linux_serial_driver_component_impl.html#acc91b9457219b56e6a3f63844a00a47f">  304</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#acc91b9457219b56e6a3f63844a00a47f">LinuxSerialDriverComponentImpl ::</a></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#acc91b9457219b56e6a3f63844a00a47f">    serialReadTaskEntry</a>(<span class="keywordtype">void</span> * ptr) {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <a class="code" href="namespace_drv.html#a730670ad0d73ef36e59e767fed6eb66c">Drv::SerialReadStatus</a> serReadStat; <span class="comment">// added by m.chase 03.06.2017</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160; </div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      <a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html">LinuxSerialDriverComponentImpl</a>* comp = <span class="keyword">static_cast&lt;</span><a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html">LinuxSerialDriverComponentImpl</a>*<span class="keyword">&gt;</span>(ptr);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      <a class="code" href="class_fw_1_1_buffer.html">Fw::Buffer</a> buff;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <span class="keywordflow">while</span> (1) {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;          <span class="comment">// wait for data</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;          <span class="keywordtype">int</span> sizeRead = 0;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;          <span class="comment">// find open buffer</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160; </div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;          comp-&gt;<a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a7e4fa490aeab0df5a40f37a971d88e39">m_readBuffMutex</a>.<a class="code" href="class_os_1_1_mutex.html#ab1ae378bd3e1de5426defb4b441c34f3">lock</a>();</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;          <span class="comment">// search for open entry</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;          <a class="code" href="basic_types_8hpp.html#ae2c29dc7dc30247eb4144d3d058d1852">NATIVE_INT_TYPE</a> entryFound = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;          <span class="keywordflow">for</span> (<a class="code" href="basic_types_8hpp.html#ae2c29dc7dc30247eb4144d3d058d1852">NATIVE_INT_TYPE</a> entry = 0; entry &lt; <a class="code" href="linux_serial_driver_component_impl_cfg_8hpp.html#a06fc87d81c62e9abb8790b6e5713c55bac21518fb9a8126033e887ee9ede7c936">DR_MAX_NUM_BUFFERS</a>; entry++) {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;              <span class="keywordflow">if</span> (comp-&gt;<a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#af81fda8cbfb227c786d2f8494dd2113e">m_buffSet</a>[entry].<a class="code" href="struct_drv_1_1_linux_serial_driver_component_impl_1_1_buffer_set.html#ab24e583d06079ac1742e31a7887d56ca">available</a>) {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                  comp-&gt;<a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#af81fda8cbfb227c786d2f8494dd2113e">m_buffSet</a>[entry].<a class="code" href="struct_drv_1_1_linux_serial_driver_component_impl_1_1_buffer_set.html#ab24e583d06079ac1742e31a7887d56ca">available</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                  buff = comp-&gt;<a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#af81fda8cbfb227c786d2f8494dd2113e">m_buffSet</a>[entry].<a class="code" href="struct_drv_1_1_linux_serial_driver_component_impl_1_1_buffer_set.html#ad0c9a0efe2a9e438c3f0bf968c219be5">readBuffer</a>;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                  entryFound = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;              }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;          }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;          comp-&gt;<a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a7e4fa490aeab0df5a40f37a971d88e39">m_readBuffMutex</a>.<a class="code" href="class_os_1_1_mutex.html#a7d4879f0b4519f483de9b3014adb6467">unLock</a>();</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;          <span class="keywordflow">if</span> (not entryFound) {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;              <a class="code" href="class_fw_1_1_log_string_arg.html">Fw::LogStringArg</a> _arg = comp-&gt;<a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a4c13a4310cc6ad301424b9ef80ce0dd9">m_device</a>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;              comp-&gt;<a class="code" href="class_drv_1_1_linux_serial_driver_component_base.html#a43ef260b1d97010b89ac7a16e0419f12">log_WARNING_HI_DR_NoBuffers</a>(_arg);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;              serReadStat = <a class="code" href="namespace_drv.html#a730670ad0d73ef36e59e767fed6eb66cac74a325e789f3c502bf97289a55a88a3">Drv::SER_NO_BUFFERS</a>; <span class="comment">// added by m.chase 03.06.2017</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;              comp-&gt;serialRecv_out(0,buff,serReadStat);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;              <span class="comment">// to avoid spinning, wait 50 ms</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;              <a class="code" href="class_os_1_1_task.html#a215cf7a77e5b2d62b393456852943a31">Os::Task::delay</a>(50);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;              <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;          }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">//          timespec stime;</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">//          (void)clock_gettime(CLOCK_REALTIME,&amp;stime);</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">//          DEBUG_PRINT(&quot;&lt;&lt;&lt; Calling dsp_relay_uart_relay_read() at %d %d\n&quot;, stime.tv_sec, stime.tv_nsec);</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;          <span class="keywordtype">bool</span> waiting = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;          <span class="keywordtype">int</span> stat = 0;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;          <span class="keywordflow">while</span> (waiting) {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;              <span class="keywordflow">if</span> (comp-&gt;<a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a3c85f4f2bf08906dafd1d3a748f19d00">m_quitReadThread</a>) {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                  <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;              }</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160; </div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;              stat = ::read(comp-&gt;<a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a6714386b0a5d957d829e883e0f677ab2">m_fd</a>,</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                            <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(buff.<a class="code" href="class_fw_1_1_buffer.html#aa782cd9789d4c954840ba7abab38ba08">getdata</a>()),</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                            buff.<a class="code" href="class_fw_1_1_buffer.html#a730367e751602c9ef76bdcb37c9097d8">getsize</a>());</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160; </div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;              <span class="comment">// Good read:</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;              <span class="keywordflow">if</span> (stat &gt; 0) {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                  sizeRead = stat;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                  <span class="comment">// TODO remove</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                  <span class="keyword">static</span> <span class="keywordtype">int</span> totalSizeRead = 0;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                  totalSizeRead += sizeRead;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                  <span class="comment">//printf(&quot;&lt;&lt;&lt; totalSizeRead: %d, readSize: %d\n&quot;, totalSizeRead, sizeRead);</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                  <span class="comment">//printf(&quot;&lt;&lt;&lt; read size: %d\n&quot;, stat);</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;              }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;              <span class="comment">// check for timeout</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;              <span class="keywordflow">if</span> (0 == stat) {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                  <span class="keywordflow">if</span> (comp-&gt;<a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a3c85f4f2bf08906dafd1d3a748f19d00">m_quitReadThread</a>) {</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                  }</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;              } <span class="keywordflow">else</span> { <span class="comment">// quit if other error or data</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                  waiting = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;              }</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;          }</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;          <span class="keywordflow">if</span> (comp-&gt;<a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a3c85f4f2bf08906dafd1d3a748f19d00">m_quitReadThread</a>) {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;              <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;          }</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;          <span class="comment">// check stat, maybe output event</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;          <span class="keywordflow">if</span> (stat == -1) {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;              <span class="comment">// TODO(mereweth) - check errno</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;              <a class="code" href="class_fw_1_1_log_string_arg.html">Fw::LogStringArg</a> _arg = comp-&gt;<a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a4c13a4310cc6ad301424b9ef80ce0dd9">m_device</a>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;              comp-&gt;<a class="code" href="class_drv_1_1_linux_serial_driver_component_base.html#a49bc350ce5d33a103954478410696843">log_WARNING_HI_DR_ReadError</a>(_arg,stat);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;              serReadStat = <a class="code" href="namespace_drv.html#a730670ad0d73ef36e59e767fed6eb66ca429f837ec0f48b3edc71608cd3306eb7">Drv::SER_OTHER_ERR</a>; <span class="comment">// added by m.chase 03.06.2017</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;              <span class="comment">//comp-&gt;serialRecv_out(0,buff,Drv::SER_OTHER_ERR);</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">//              (void)clock_gettime(CLOCK_REALTIME,&amp;stime);</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">//              DEBUG_PRINT(&quot;&lt;!&lt;! Sending data to RceAdapter %u at %d %d\n&quot;, buff.getsize(), stime.tv_sec, stime.tv_nsec);</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;              buff.<a class="code" href="class_fw_1_1_buffer.html#a5496d5f273865793d41b642668f5120e">setsize</a>(sizeRead);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;              serReadStat = <a class="code" href="namespace_drv.html#a730670ad0d73ef36e59e767fed6eb66ca17ee3a2d00486696d5fb7d0236e20612">Drv::SER_OK</a>; <span class="comment">// added by m.chase 03.06.2017</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;              <span class="comment">//comp-&gt;serialRecv_out(0,buff,Drv::SER_OK);</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;          }</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;          comp-&gt;serialRecv_out(0,buff,serReadStat); <span class="comment">// added by m.chase 03.06.2017</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      }</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  }</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160; </div>
<div class="line"><a name="l00400"></a><span class="lineno"><a class="line" href="class_drv_1_1_linux_serial_driver_component_impl.html#a0e5b00dfe3211767c1d7aa16d57fccc5">  400</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a0e5b00dfe3211767c1d7aa16d57fccc5">LinuxSerialDriverComponentImpl ::</a></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a0e5b00dfe3211767c1d7aa16d57fccc5">    startReadThread</a>(<a class="code" href="basic_types_8hpp.html#ae2c29dc7dc30247eb4144d3d058d1852">NATIVE_INT_TYPE</a> priority, <a class="code" href="basic_types_8hpp.html#ae2c29dc7dc30247eb4144d3d058d1852">NATIVE_INT_TYPE</a> stackSize, <a class="code" href="basic_types_8hpp.html#ae2c29dc7dc30247eb4144d3d058d1852">NATIVE_INT_TYPE</a> cpuAffinity) {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160; </div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      <a class="code" href="class_fw_1_1_eighty_char_string.html">Fw::EightyCharString</a> task(<span class="stringliteral">&quot;SerReader&quot;</span>);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      <a class="code" href="class_os_1_1_task.html#aa1922f0444b26ffce3526353e291af8f">Os::Task::TaskStatus</a> stat = this-&gt;<a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#ab77459003f0f1cf0d81d9a2af0205cb3">m_readTask</a>.<a class="code" href="class_os_1_1_task.html#a66921cd085090de81f6981bef3f11c17">start</a>(task, 0, priority, stackSize,</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                                                         <a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#acc91b9457219b56e6a3f63844a00a47f">serialReadTaskEntry</a>, <span class="keyword">this</span>, cpuAffinity);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      <a class="code" href="assert_8hpp.html#ae203ae2022a5f92eea0ceb85a0d62c3c">FW_ASSERT</a>(stat == <a class="code" href="class_os_1_1_task.html#aa1922f0444b26ffce3526353e291af8fa38fdf68e513d964c543e6082ffde55b9">Os::Task::TASK_OK</a>, stat);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  }</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160; </div>
<div class="line"><a name="l00409"></a><span class="lineno"><a class="line" href="class_drv_1_1_linux_serial_driver_component_impl.html#a1c6b5e10b3c9dc35261fe98a3c932ac8">  409</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a1c6b5e10b3c9dc35261fe98a3c932ac8">LinuxSerialDriverComponentImpl ::</a></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a1c6b5e10b3c9dc35261fe98a3c932ac8">    quitReadThread</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      this-&gt;<a class="code" href="class_drv_1_1_linux_serial_driver_component_impl.html#a3c85f4f2bf08906dafd1d3a748f19d00">m_quitReadThread</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  }</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;} <span class="comment">// end namespace Drv</span></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_impl_html_a3c0a0e8d9499f15b5f35bc051123b0a6"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_impl.html#a3c0a0e8d9499f15b5f35bc051123b0a6">Drv::LinuxSerialDriverComponentImpl::open</a></div><div class="ttdeci">bool open(const char *const device, UartBaudRate baud, UartFlowControl fc, UartParity parity, bool block)</div><div class="ttdef"><b>Definition:</b> <a href="linux_serial_driver_component_impl_8cpp_source.html#l00037">LinuxSerialDriverComponentImpl.cpp:37</a></div></div>
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_impl_html_ad9452c02c517a8491be9e7b7eb8f7f8ea25598e2120a13d9d5b30f2c9bd037931"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_impl.html#ad9452c02c517a8491be9e7b7eb8f7f8ea25598e2120a13d9d5b30f2c9bd037931">Drv::LinuxSerialDriverComponentImpl::PARITY_EVEN</a></div><div class="ttdeci">@ PARITY_EVEN</div><div class="ttdef"><b>Definition:</b> <a href="linux_serial_driver_component_impl_8hpp_source.html#l00065">LinuxSerialDriverComponentImpl.hpp:64</a></div></div>
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_impl_html_a7e4fa490aeab0df5a40f37a971d88e39"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_impl.html#a7e4fa490aeab0df5a40f37a971d88e39">Drv::LinuxSerialDriverComponentImpl::m_readBuffMutex</a></div><div class="ttdeci">Os::Mutex m_readBuffMutex</div><div class="ttdef"><b>Definition:</b> <a href="linux_serial_driver_component_impl_8hpp_source.html#l00115">LinuxSerialDriverComponentImpl.hpp:115</a></div></div>
<div class="ttc" id="anamespace_drv_html_a730670ad0d73ef36e59e767fed6eb66cac74a325e789f3c502bf97289a55a88a3"><div class="ttname"><a href="namespace_drv.html#a730670ad0d73ef36e59e767fed6eb66cac74a325e789f3c502bf97289a55a88a3">Drv::SER_NO_BUFFERS</a></div><div class="ttdeci">@ SER_NO_BUFFERS</div><div class="ttdef"><b>Definition:</b> <a href="serial_read_port_ac_8hpp_source.html#l00028">SerialReadPortAc.hpp:28</a></div></div>
<div class="ttc" id="aclass_os_1_1_mutex_html_ab1ae378bd3e1de5426defb4b441c34f3"><div class="ttname"><a href="class_os_1_1_mutex.html#ab1ae378bd3e1de5426defb4b441c34f3">Os::Mutex::lock</a></div><div class="ttdeci">void lock(void)</div><div class="ttdoc">lock the mutex</div><div class="ttdef"><b>Definition:</b> <a href="baremetal_2_mutex_8cpp_source.html#l00012">Mutex.cpp:12</a></div></div>
<div class="ttc" id="aclass_fw_1_1_buffer_html_a5496d5f273865793d41b642668f5120e"><div class="ttname"><a href="class_fw_1_1_buffer.html#a5496d5f273865793d41b642668f5120e">Fw::Buffer::setsize</a></div><div class="ttdeci">void setsize(U32 val)</div><div class="ttdoc">set member size</div><div class="ttdef"><b>Definition:</b> <a href="buffer_serializable_ac_8cpp_source.html#l00074">BufferSerializableAc.cpp:74</a></div></div>
<div class="ttc" id="aclass_fw_1_1_buffer_html_a730367e751602c9ef76bdcb37c9097d8"><div class="ttname"><a href="class_fw_1_1_buffer.html#a730367e751602c9ef76bdcb37c9097d8">Fw::Buffer::getsize</a></div><div class="ttdeci">U32 getsize(void)</div><div class="ttdoc">get member size</div><div class="ttdef"><b>Definition:</b> <a href="buffer_serializable_ac_8cpp_source.html#l00061">BufferSerializableAc.cpp:61</a></div></div>
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_impl_html_ab77459003f0f1cf0d81d9a2af0205cb3"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_impl.html#ab77459003f0f1cf0d81d9a2af0205cb3">Drv::LinuxSerialDriverComponentImpl::m_readTask</a></div><div class="ttdeci">Os::Task m_readTask</div><div class="ttdoc">task instance for thread to read serial port</div><div class="ttdef"><b>Definition:</b> <a href="linux_serial_driver_component_impl_8hpp_source.html#l00108">LinuxSerialDriverComponentImpl.hpp:108</a></div></div>
<div class="ttc" id="aclass_os_1_1_mutex_html_a7d4879f0b4519f483de9b3014adb6467"><div class="ttname"><a href="class_os_1_1_mutex.html#a7d4879f0b4519f483de9b3014adb6467">Os::Mutex::unLock</a></div><div class="ttdeci">void unLock(void)</div><div class="ttdoc">unlock the mutex</div><div class="ttdef"><b>Definition:</b> <a href="baremetal_2_mutex_8cpp_source.html#l00013">Mutex.cpp:13</a></div></div>
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_impl_html_a3c85f4f2bf08906dafd1d3a748f19d00"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_impl.html#a3c85f4f2bf08906dafd1d3a748f19d00">Drv::LinuxSerialDriverComponentImpl::m_quitReadThread</a></div><div class="ttdeci">bool m_quitReadThread</div><div class="ttdoc">flag to quit thread</div><div class="ttdef"><b>Definition:</b> <a href="linux_serial_driver_component_impl_8hpp_source.html#l00117">LinuxSerialDriverComponentImpl.hpp:117</a></div></div>
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_impl_html_ad9452c02c517a8491be9e7b7eb8f7f8ea79d2c16eefbf8084cbb91cf929430a49"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_impl.html#ad9452c02c517a8491be9e7b7eb8f7f8ea79d2c16eefbf8084cbb91cf929430a49">Drv::LinuxSerialDriverComponentImpl::PARITY_NONE</a></div><div class="ttdeci">@ PARITY_NONE</div><div class="ttdef"><b>Definition:</b> <a href="linux_serial_driver_component_impl_8hpp_source.html#l00062">LinuxSerialDriverComponentImpl.hpp:62</a></div></div>
<div class="ttc" id="aclass_fw_1_1_log_string_arg_html"><div class="ttname"><a href="class_fw_1_1_log_string_arg.html">Fw::LogStringArg</a></div><div class="ttdef"><b>Definition:</b> <a href="log_string_8hpp_source.html#l00011">LogString.hpp:11</a></div></div>
<div class="ttc" id="anamespace_drv_html_a730670ad0d73ef36e59e767fed6eb66ca429f837ec0f48b3edc71608cd3306eb7"><div class="ttname"><a href="namespace_drv.html#a730670ad0d73ef36e59e767fed6eb66ca429f837ec0f48b3edc71608cd3306eb7">Drv::SER_OTHER_ERR</a></div><div class="ttdeci">@ SER_OTHER_ERR</div><div class="ttdef"><b>Definition:</b> <a href="serial_read_port_ac_8hpp_source.html#l00030">SerialReadPortAc.hpp:30</a></div></div>
<div class="ttc" id="anamespace_drv_html"><div class="ttname"><a href="namespace_drv.html">Drv</a></div><div class="ttdef"><b>Definition:</b> <a href="block_driver_component_ac_8cpp_source.html#l00022">BlockDriverComponentAc.cpp:22</a></div></div>
<div class="ttc" id="aclass_fw_1_1_eighty_char_string_html"><div class="ttname"><a href="class_fw_1_1_eighty_char_string.html">Fw::EightyCharString</a></div><div class="ttdef"><b>Definition:</b> <a href="eighty_char_string_8hpp_source.html#l00010">EightyCharString.hpp:10</a></div></div>
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_base_html_aa8dcb38efea8d4a1ee2df7739cfaf0c5"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_base.html#aa8dcb38efea8d4a1ee2df7739cfaf0c5">Drv::LinuxSerialDriverComponentBase::log_WARNING_HI_DR_WriteError</a></div><div class="ttdeci">void log_WARNING_HI_DR_WriteError(Fw::LogStringArg &amp;device, I32 error)</div><div class="ttdef"><b>Definition:</b> <a href="linux_serial_driver_component_ac_8cpp_source.html#l00797">LinuxSerialDriverComponentAc.cpp:798</a></div></div>
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_impl_html_aad14e14819d2e63364bf648587444389"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_impl.html#aad14e14819d2e63364bf648587444389">Drv::LinuxSerialDriverComponentImpl::UartFlowControl</a></div><div class="ttdeci">enum Drv::LinuxSerialDriverComponentImpl::FLOW_CONTROL UartFlowControl</div></div>
<div class="ttc" id="aclass_fw_1_1_buffer_html"><div class="ttname"><a href="class_fw_1_1_buffer.html">Fw::Buffer</a></div><div class="ttdef"><b>Definition:</b> <a href="buffer_serializable_ac_8hpp_source.html#l00024">BufferSerializableAc.hpp:24</a></div></div>
<div class="ttc" id="astruct_drv_1_1_linux_serial_driver_component_impl_1_1_buffer_set_html_ad0c9a0efe2a9e438c3f0bf968c219be5"><div class="ttname"><a href="struct_drv_1_1_linux_serial_driver_component_impl_1_1_buffer_set.html#ad0c9a0efe2a9e438c3f0bf968c219be5">Drv::LinuxSerialDriverComponentImpl::BufferSet::readBuffer</a></div><div class="ttdeci">Fw::Buffer readBuffer</div><div class="ttdoc">buffers for port reads</div><div class="ttdef"><b>Definition:</b> <a href="linux_serial_driver_component_impl_8hpp_source.html#l00111">LinuxSerialDriverComponentImpl.hpp:111</a></div></div>
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_impl_html_a84c9b7f8a8e41db9575734e965a3a99eaca9c236f722c9ae71b7019271af2fe79"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_impl.html#a84c9b7f8a8e41db9575734e965a3a99eaca9c236f722c9ae71b7019271af2fe79">Drv::LinuxSerialDriverComponentImpl::BAUD_19200</a></div><div class="ttdeci">@ BAUD_19200</div><div class="ttdef"><b>Definition:</b> <a href="linux_serial_driver_component_impl_8hpp_source.html#l00047">LinuxSerialDriverComponentImpl.hpp:47</a></div></div>
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_impl_html_ae50cdaf949dec24d4f44d2dfb416cafe"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_impl.html#ae50cdaf949dec24d4f44d2dfb416cafe">Drv::LinuxSerialDriverComponentImpl::UartParity</a></div><div class="ttdeci">enum Drv::LinuxSerialDriverComponentImpl::PARITY UartParity</div></div>
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_impl_html_a84c9b7f8a8e41db9575734e965a3a99eaa26ac5c5d7e64938e1df8fd5e2b437c8"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_impl.html#a84c9b7f8a8e41db9575734e965a3a99eaa26ac5c5d7e64938e1df8fd5e2b437c8">Drv::LinuxSerialDriverComponentImpl::BAUD_460K</a></div><div class="ttdeci">@ BAUD_460K</div><div class="ttdef"><b>Definition:</b> <a href="linux_serial_driver_component_impl_8hpp_source.html#l00052">LinuxSerialDriverComponentImpl.hpp:52</a></div></div>
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_impl_html_a1a10f72c4a2bcbb7c214296da5b4c87a"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_impl.html#a1a10f72c4a2bcbb7c214296da5b4c87a">Drv::LinuxSerialDriverComponentImpl::~LinuxSerialDriverComponentImpl</a></div><div class="ttdeci">~LinuxSerialDriverComponentImpl(void)</div><div class="ttdef"><b>Definition:</b> <a href="linux_serial_driver_component_impl_8cpp_source.html#l00266">LinuxSerialDriverComponentImpl.cpp:267</a></div></div>
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_impl_html_a01d2f279af50161b1feb87fcd5ce8109"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_impl.html#a01d2f279af50161b1feb87fcd5ce8109">Drv::LinuxSerialDriverComponentImpl::serBuffer</a></div><div class="ttdeci">PRIVATE Fw::Buffer &amp; serBuffer</div><div class="ttdef"><b>Definition:</b> <a href="linux_serial_driver_component_impl_8hpp_source.html#l00092">LinuxSerialDriverComponentImpl.hpp:93</a></div></div>
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_impl_html_a84c9b7f8a8e41db9575734e965a3a99ea432d51514e85797bdbab179d8145ae7a"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_impl.html#a84c9b7f8a8e41db9575734e965a3a99ea432d51514e85797bdbab179d8145ae7a">Drv::LinuxSerialDriverComponentImpl::BAUD_230K</a></div><div class="ttdeci">@ BAUD_230K</div><div class="ttdef"><b>Definition:</b> <a href="linux_serial_driver_component_impl_8hpp_source.html#l00051">LinuxSerialDriverComponentImpl.hpp:51</a></div></div>
<div class="ttc" id="aclass_fw_1_1_buffer_html_aa782cd9789d4c954840ba7abab38ba08"><div class="ttname"><a href="class_fw_1_1_buffer.html#aa782cd9789d4c954840ba7abab38ba08">Fw::Buffer::getdata</a></div><div class="ttdeci">U64 getdata(void)</div><div class="ttdoc">get member data</div><div class="ttdef"><b>Definition:</b> <a href="buffer_serializable_ac_8cpp_source.html#l00057">BufferSerializableAc.cpp:57</a></div></div>
<div class="ttc" id="a_eighty_char_string_8hpp_html"><div class="ttname"><a href="eighty_char_string_8hpp.html">EightyCharString.hpp</a></div></div>
<div class="ttc" id="anamespace_drv_html_a730670ad0d73ef36e59e767fed6eb66c"><div class="ttname"><a href="namespace_drv.html#a730670ad0d73ef36e59e767fed6eb66c">Drv::SerialReadStatus</a></div><div class="ttdeci">SerialReadStatus</div><div class="ttdef"><b>Definition:</b> <a href="serial_read_port_ac_8hpp_source.html#l00025">SerialReadPortAc.hpp:25</a></div></div>
<div class="ttc" id="aclass_os_1_1_task_html_aa1922f0444b26ffce3526353e291af8fa38fdf68e513d964c543e6082ffde55b9"><div class="ttname"><a href="class_os_1_1_task.html#aa1922f0444b26ffce3526353e291af8fa38fdf68e513d964c543e6082ffde55b9">Os::Task::TASK_OK</a></div><div class="ttdeci">@ TASK_OK</div><div class="ttdoc">message sent/received okay</div><div class="ttdef"><b>Definition:</b> <a href="task_8hpp_source.html#l00019">Task.hpp:19</a></div></div>
<div class="ttc" id="aclass_os_1_1_task_html_aa1922f0444b26ffce3526353e291af8f"><div class="ttname"><a href="class_os_1_1_task.html#aa1922f0444b26ffce3526353e291af8f">Os::Task::TaskStatus</a></div><div class="ttdeci">TaskStatus</div><div class="ttdef"><b>Definition:</b> <a href="task_8hpp_source.html#l00018">Task.hpp:18</a></div></div>
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_impl_html_a4c13a4310cc6ad301424b9ef80ce0dd9"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_impl.html#a4c13a4310cc6ad301424b9ef80ce0dd9">Drv::LinuxSerialDriverComponentImpl::m_device</a></div><div class="ttdeci">const char * m_device</div><div class="ttdoc">original device path</div><div class="ttdef"><b>Definition:</b> <a href="linux_serial_driver_component_impl_8hpp_source.html#l00103">LinuxSerialDriverComponentImpl.hpp:103</a></div></div>
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_impl_html"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_impl.html">Drv::LinuxSerialDriverComponentImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="linux_serial_driver_component_impl_8hpp_source.html#l00022">LinuxSerialDriverComponentImpl.hpp:24</a></div></div>
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_base_html_a43ef260b1d97010b89ac7a16e0419f12"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_base.html#a43ef260b1d97010b89ac7a16e0419f12">Drv::LinuxSerialDriverComponentBase::log_WARNING_HI_DR_NoBuffers</a></div><div class="ttdeci">void log_WARNING_HI_DR_NoBuffers(Fw::LogStringArg &amp;device)</div><div class="ttdef"><b>Definition:</b> <a href="linux_serial_driver_component_ac_8cpp_source.html#l01117">LinuxSerialDriverComponentAc.cpp:1118</a></div></div>
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_impl_html_a6714386b0a5d957d829e883e0f677ab2"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_impl.html#a6714386b0a5d957d829e883e0f677ab2">Drv::LinuxSerialDriverComponentImpl::m_fd</a></div><div class="ttdeci">NATIVE_INT_TYPE m_fd</div><div class="ttdoc">file descriptor returned for I/O device</div><div class="ttdef"><b>Definition:</b> <a href="linux_serial_driver_component_impl_8hpp_source.html#l00102">LinuxSerialDriverComponentImpl.hpp:102</a></div></div>
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_impl_html_a84c9b7f8a8e41db9575734e965a3a99eaaccbf6218fb9fd4750cbdd294c198b03"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_impl.html#a84c9b7f8a8e41db9575734e965a3a99eaaccbf6218fb9fd4750cbdd294c198b03">Drv::LinuxSerialDriverComponentImpl::BAUD_921K</a></div><div class="ttdeci">@ BAUD_921K</div><div class="ttdef"><b>Definition:</b> <a href="linux_serial_driver_component_impl_8hpp_source.html#l00054">LinuxSerialDriverComponentImpl.hpp:53</a></div></div>
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_impl_html_a2ba16e50af2df9aa1c9190b1e34ebeb9a814646e41796706bb76271edbb5ea6a5"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_impl.html#a2ba16e50af2df9aa1c9190b1e34ebeb9a814646e41796706bb76271edbb5ea6a5">Drv::LinuxSerialDriverComponentImpl::HW_FLOW</a></div><div class="ttdeci">@ HW_FLOW</div><div class="ttdef"><b>Definition:</b> <a href="linux_serial_driver_component_impl_8hpp_source.html#l00059">LinuxSerialDriverComponentImpl.hpp:58</a></div></div>
<div class="ttc" id="a_assert_8hpp_html_ae203ae2022a5f92eea0ceb85a0d62c3c"><div class="ttname"><a href="assert_8hpp.html#ae203ae2022a5f92eea0ceb85a0d62c3c">FW_ASSERT</a></div><div class="ttdeci">#define FW_ASSERT(...)</div><div class="ttdef"><b>Definition:</b> <a href="assert_8hpp_source.html#l00009">Assert.hpp:9</a></div></div>
<div class="ttc" id="a_linux_serial_driver_component_impl_8cpp_html_a9e21a2a88f554186e2b2380b00eab944"><div class="ttname"><a href="linux_serial_driver_component_impl_8cpp.html#a9e21a2a88f554186e2b2380b00eab944">DEBUG_PRINT</a></div><div class="ttdeci">#define DEBUG_PRINT(x,...)</div><div class="ttdef"><b>Definition:</b> <a href="linux_serial_driver_component_impl_8cpp_source.html#l00029">LinuxSerialDriverComponentImpl.cpp:29</a></div></div>
<div class="ttc" id="aclass_os_1_1_task_html_a215cf7a77e5b2d62b393456852943a31"><div class="ttname"><a href="class_os_1_1_task.html#a215cf7a77e5b2d62b393456852943a31">Os::Task::delay</a></div><div class="ttdeci">static TaskStatus delay(NATIVE_UINT_TYPE msecs)</div><div class="ttdoc">delay the task</div><div class="ttdef"><b>Definition:</b> <a href="baremetal_2_task_8cpp_source.html#l00041">Task.cpp:41</a></div></div>
<div class="ttc" id="aclass_os_1_1_task_html_a66921cd085090de81f6981bef3f11c17"><div class="ttname"><a href="class_os_1_1_task.html#a66921cd085090de81f6981bef3f11c17">Os::Task::start</a></div><div class="ttdeci">TaskStatus start(const Fw::StringBase &amp;name, NATIVE_INT_TYPE identifier, NATIVE_INT_TYPE priority, NATIVE_INT_TYPE stackSize, taskRoutine routine, void *arg, NATIVE_INT_TYPE cpuAffinity=-1)</div><div class="ttdoc">start the task</div><div class="ttdef"><b>Definition:</b> <a href="baremetal_2_task_8cpp_source.html#l00016">Task.cpp:16</a></div></div>
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_impl_html_acc91b9457219b56e6a3f63844a00a47f"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_impl.html#acc91b9457219b56e6a3f63844a00a47f">Drv::LinuxSerialDriverComponentImpl::serialReadTaskEntry</a></div><div class="ttdeci">static void serialReadTaskEntry(void *ptr)</div><div class="ttdoc">This method will be called by the new thread to wait for input on the serial port.</div><div class="ttdef"><b>Definition:</b> <a href="linux_serial_driver_component_impl_8cpp_source.html#l00304">LinuxSerialDriverComponentImpl.cpp:305</a></div></div>
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_impl_html_af81fda8cbfb227c786d2f8494dd2113e"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_impl.html#af81fda8cbfb227c786d2f8494dd2113e">Drv::LinuxSerialDriverComponentImpl::m_buffSet</a></div><div class="ttdeci">struct Drv::LinuxSerialDriverComponentImpl::BufferSet m_buffSet[DR_MAX_NUM_BUFFERS]</div></div>
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_impl_html_a84c9b7f8a8e41db9575734e965a3a99ea84ff1fc2f68ed8b9e02a7392c5d38561"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_impl.html#a84c9b7f8a8e41db9575734e965a3a99ea84ff1fc2f68ed8b9e02a7392c5d38561">Drv::LinuxSerialDriverComponentImpl::BAUD_9600</a></div><div class="ttdeci">@ BAUD_9600</div><div class="ttdef"><b>Definition:</b> <a href="linux_serial_driver_component_impl_8hpp_source.html#l00046">LinuxSerialDriverComponentImpl.hpp:46</a></div></div>
<div class="ttc" id="a_linux_serial_driver_component_impl_cfg_8hpp_html_a06fc87d81c62e9abb8790b6e5713c55bac21518fb9a8126033e887ee9ede7c936"><div class="ttname"><a href="linux_serial_driver_component_impl_cfg_8hpp.html#a06fc87d81c62e9abb8790b6e5713c55bac21518fb9a8126033e887ee9ede7c936">DR_MAX_NUM_BUFFERS</a></div><div class="ttdeci">@ DR_MAX_NUM_BUFFERS</div><div class="ttdef"><b>Definition:</b> <a href="linux_serial_driver_component_impl_cfg_8hpp_source.html#l00012">LinuxSerialDriverComponentImplCfg.hpp:12</a></div></div>
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_impl_html_a84c9b7f8a8e41db9575734e965a3a99ea8b7fbb9e29befd0554faaa1bac3bb5df"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_impl.html#a84c9b7f8a8e41db9575734e965a3a99ea8b7fbb9e29befd0554faaa1bac3bb5df">Drv::LinuxSerialDriverComponentImpl::BAUD_38400</a></div><div class="ttdeci">@ BAUD_38400</div><div class="ttdef"><b>Definition:</b> <a href="linux_serial_driver_component_impl_8hpp_source.html#l00048">LinuxSerialDriverComponentImpl.hpp:48</a></div></div>
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_impl_html_a9dad2b92cd0d996fa55f89aac44cb791"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_impl.html#a9dad2b92cd0d996fa55f89aac44cb791">Drv::LinuxSerialDriverComponentImpl::UartBaudRate</a></div><div class="ttdeci">enum Drv::LinuxSerialDriverComponentImpl::BAUD_RATE UartBaudRate</div><div class="ttdoc">Configure UART parameters.</div></div>
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_impl_html_a84c9b7f8a8e41db9575734e965a3a99eae4e3d17298b35de0dde561fd7caf19b2"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_impl.html#a84c9b7f8a8e41db9575734e965a3a99eae4e3d17298b35de0dde561fd7caf19b2">Drv::LinuxSerialDriverComponentImpl::BAUD_57600</a></div><div class="ttdeci">@ BAUD_57600</div><div class="ttdef"><b>Definition:</b> <a href="linux_serial_driver_component_impl_8hpp_source.html#l00049">LinuxSerialDriverComponentImpl.hpp:49</a></div></div>
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_base_html_ad8f82955f091f42b4c6685278eb586a9"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_base.html#ad8f82955f091f42b4c6685278eb586a9">Drv::LinuxSerialDriverComponentBase::serialSend_handler</a></div><div class="ttdeci">virtual void serialSend_handler(NATIVE_INT_TYPE portNum, Fw::Buffer &amp;serBuffer)=0</div><div class="ttdoc">Handler for input port serialSend.</div></div>
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_impl_html_ad9452c02c517a8491be9e7b7eb8f7f8ea9fd0804c886dfcb648119861e3d0bfab"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_impl.html#ad9452c02c517a8491be9e7b7eb8f7f8ea9fd0804c886dfcb648119861e3d0bfab">Drv::LinuxSerialDriverComponentImpl::PARITY_ODD</a></div><div class="ttdeci">@ PARITY_ODD</div><div class="ttdef"><b>Definition:</b> <a href="linux_serial_driver_component_impl_8hpp_source.html#l00063">LinuxSerialDriverComponentImpl.hpp:63</a></div></div>
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_base_html_ae852e2c7c65641db20affa69bb9314ab"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_base.html#ae852e2c7c65641db20affa69bb9314ab">Drv::LinuxSerialDriverComponentBase::log_ACTIVITY_HI_DR_PortOpened</a></div><div class="ttdeci">void log_ACTIVITY_HI_DR_PortOpened(Fw::LogStringArg &amp;device)</div><div class="ttdef"><b>Definition:</b> <a href="linux_serial_driver_component_ac_8cpp_source.html#l01029">LinuxSerialDriverComponentAc.cpp:1030</a></div></div>
<div class="ttc" id="a_linux_serial_driver_component_impl_8hpp_html"><div class="ttname"><a href="linux_serial_driver_component_impl_8hpp.html">LinuxSerialDriverComponentImpl.hpp</a></div></div>
<div class="ttc" id="a_basic_types_8hpp_html"><div class="ttname"><a href="basic_types_8hpp.html">BasicTypes.hpp</a></div><div class="ttdoc">Declares ISF basic types.</div></div>
<div class="ttc" id="anamespace_drv_html_a730670ad0d73ef36e59e767fed6eb66ca17ee3a2d00486696d5fb7d0236e20612"><div class="ttname"><a href="namespace_drv.html#a730670ad0d73ef36e59e767fed6eb66ca17ee3a2d00486696d5fb7d0236e20612">Drv::SER_OK</a></div><div class="ttdeci">@ SER_OK</div><div class="ttdef"><b>Definition:</b> <a href="serial_read_port_ac_8hpp_source.html#l00026">SerialReadPortAc.hpp:26</a></div></div>
<div class="ttc" id="astruct_drv_1_1_linux_serial_driver_component_impl_1_1_buffer_set_html_ab24e583d06079ac1742e31a7887d56ca"><div class="ttname"><a href="struct_drv_1_1_linux_serial_driver_component_impl_1_1_buffer_set.html#ab24e583d06079ac1742e31a7887d56ca">Drv::LinuxSerialDriverComponentImpl::BufferSet::available</a></div><div class="ttdeci">bool available</div><div class="ttdoc">is buffer available?</div><div class="ttdef"><b>Definition:</b> <a href="linux_serial_driver_component_impl_8hpp_source.html#l00112">LinuxSerialDriverComponentImpl.hpp:112</a></div></div>
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_base_html_a49bc350ce5d33a103954478410696843"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_base.html#a49bc350ce5d33a103954478410696843">Drv::LinuxSerialDriverComponentBase::log_WARNING_HI_DR_ReadError</a></div><div class="ttdeci">void log_WARNING_HI_DR_ReadError(Fw::LogStringArg &amp;device, I32 error)</div><div class="ttdef"><b>Definition:</b> <a href="linux_serial_driver_component_ac_8cpp_source.html#l00913">LinuxSerialDriverComponentAc.cpp:914</a></div></div>
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_impl_html_a1c6b5e10b3c9dc35261fe98a3c932ac8"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_impl.html#a1c6b5e10b3c9dc35261fe98a3c932ac8">Drv::LinuxSerialDriverComponentImpl::quitReadThread</a></div><div class="ttdeci">void quitReadThread(void)</div><div class="ttdoc">Quit thread.</div><div class="ttdef"><b>Definition:</b> <a href="linux_serial_driver_component_impl_8cpp_source.html#l00409">LinuxSerialDriverComponentImpl.cpp:410</a></div></div>
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_impl_html_a0e5b00dfe3211767c1d7aa16d57fccc5"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_impl.html#a0e5b00dfe3211767c1d7aa16d57fccc5">Drv::LinuxSerialDriverComponentImpl::startReadThread</a></div><div class="ttdeci">void startReadThread(NATIVE_INT_TYPE priority, NATIVE_INT_TYPE stackSize, NATIVE_INT_TYPE cpuAffinity=-1)</div><div class="ttdef"><b>Definition:</b> <a href="linux_serial_driver_component_impl_8cpp_source.html#l00400">LinuxSerialDriverComponentImpl.cpp:401</a></div></div>
<div class="ttc" id="a_basic_types_8hpp_html_ae2c29dc7dc30247eb4144d3d058d1852"><div class="ttname"><a href="basic_types_8hpp.html#ae2c29dc7dc30247eb4144d3d058d1852">NATIVE_INT_TYPE</a></div><div class="ttdeci">int NATIVE_INT_TYPE</div><div class="ttdoc">native integer type declaration</div><div class="ttdef"><b>Definition:</b> <a href="basic_types_8hpp_source.html#l00029">BasicTypes.hpp:29</a></div></div>
<div class="ttc" id="aclass_drv_1_1_linux_serial_driver_component_impl_html_a84c9b7f8a8e41db9575734e965a3a99ea4b1215baf0cd6b0c01d19e9f574cd3b5"><div class="ttname"><a href="class_drv_1_1_linux_serial_driver_component_impl.html#a84c9b7f8a8e41db9575734e965a3a99ea4b1215baf0cd6b0c01d19e9f574cd3b5">Drv::LinuxSerialDriverComponentImpl::BAUD_115K</a></div><div class="ttdeci">@ BAUD_115K</div><div class="ttdef"><b>Definition:</b> <a href="linux_serial_driver_component_impl_8hpp_source.html#l00050">LinuxSerialDriverComponentImpl.hpp:50</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d2b6462c6d5a51a32c660fca9dd2a1a2.html">Drv</a></li><li class="navelem"><a class="el" href="dir_d676657a2f1578413d045cb9f8035ada.html">LinuxSerialDriver</a></li><li class="navelem"><a class="el" href="linux_serial_driver_component_impl_8cpp.html">LinuxSerialDriverComponentImpl.cpp</a></li>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.19 </li>
  </ul>
</div>
</body>
</html>
