<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.19"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>F´ Flight Software - C/C++ Documentation: Svc::RateGroupDriver Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">F´ Flight Software - C/C++ Documentation
   &#160;<span id="projectnumber">NASA-v1.5.0</span>
   </div>
   <div id="projectbrief">A framework for building embedded system applications to NASA flight quality standards.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.19 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_svc_rate_group_driver_component.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Svc::RateGroupDriver Component </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md128"></a>
Svc::RateGroupDriver Component</h1>
<h2><a class="anchor" id="autotoc_md129"></a>
1. Introduction</h2>
<p><code>Svc::ActiveRateGroup</code> is an active component that drives a set of components connected to <code>Svc::Sched</code> output ports. It contains an asynchronous input <code>Svc::Cycle</code> port. This port sends a message which wakes the component task. The task invokes each output port in order, passing an argument indicating the order. It tracks execution time and detects overruns.</p>
<h2><a class="anchor" id="autotoc_md130"></a>
2. Requirements</h2>
<p>The requirements for <code>Svc::ActiveRateGroup</code> are as follows:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Requirement  </th><th class="markdownTableHeadNone">Description  </th><th class="markdownTableHeadNone">Verification Method   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ARG-001  </td><td class="markdownTableBodyNone">The <code>Svc::ActiveRateGroup</code> component shall be active and will be woken up by an input asynchronous port call  </td><td class="markdownTableBodyNone">Inspection, Unit test   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ARG-002  </td><td class="markdownTableBodyNone">The <code>Svc::ActiveRateGroup</code> component shall invoke its output ports in order, passing the value contained in a table based on port number  </td><td class="markdownTableBodyNone">Unit Test   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ARG-003  </td><td class="markdownTableBodyNone">The <code>Svc::ActiveRateGroup</code> component shall track the time required to execute the rate group and report it as telemetry  </td><td class="markdownTableBodyNone">Unit Test   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ARG-004  </td><td class="markdownTableBodyNone">The <code>Svc::ActiveRateGroup</code> component shall report a warning event when a rate group cycle is started before previous is completed  </td><td class="markdownTableBodyNone">Unit Test   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md131"></a>
3. Design</h2>
<h3><a class="anchor" id="autotoc_md132"></a>
3.1 Context</h3>
<h4><a class="anchor" id="autotoc_md133"></a>
3.1.1 Component Diagram</h4>
<p>The <code>Svc::ActiveRateGroup</code> component has the following component diagram:</p>
<p><img src="img/ActiveRateGroupBDD.jpg" alt="ActiveRateGroup Diagram" title="ActiveRateGroup" class="inline"/></p>
<h4><a class="anchor" id="autotoc_md134"></a>
3.1.2 Ports</h4>
<p>The <code>Svc::ActiveRateGroup</code> component uses the following port types:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Port Data Type  </th><th class="markdownTableHeadNone">Name  </th><th class="markdownTableHeadNone">Direction  </th><th class="markdownTableHeadNone">Kind  </th><th class="markdownTableHeadNone">Usage   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="../../Cycle/docs/sdd.html"><code>Svc::Cycle</code></a>  </td><td class="markdownTableBodyNone">CycleIn  </td><td class="markdownTableBodyNone">Input  </td><td class="markdownTableBodyNone">Asynchronous  </td><td class="markdownTableBodyNone">Receive a call to run one cycle of the rate group   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="../../Sched/docs/sdd.html"><code>Svc::Sched</code></a>  </td><td class="markdownTableBodyNone">RateGroupMemberOut  </td><td class="markdownTableBodyNone">Output  </td><td class="markdownTableBodyNone">n/a  </td><td class="markdownTableBodyNone">Rate group ports   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md135"></a>
3.2 Functional Description</h4>
<p>The <code>Svc::ActiveRateGroup</code> component has one input port that is called to wake up the task to execute one cycle. <br  />
 The task of the component calls the output ports in order, passing the context from the context list as the port argument.</p>
<p>The component sets a flag when the cycle port is invoked. At the beginning of the rate group execution, the component clears the flag. If it detects that it has been set again at the end of the rate group cycle, it will declare a cycle slip, send an event, and increase the cycle slip counters.</p>
<h3><a class="anchor" id="autotoc_md136"></a>
3.3 Scenarios</h3>
<h4><a class="anchor" id="autotoc_md137"></a>
3.3.1 Rate Group Port Call</h4>
<p>As described in the Functional Description section, the <code>Svc::ActiveRateGroup</code> component accepts calls to the CycleIn and invokes the RateGroupMemberOut ports:</p>
<p><img src="img/RateGroupCall.jpg" alt="System Tick Port Call" class="inline"/></p>
<h3><a class="anchor" id="autotoc_md138"></a>
3.4 State</h3>
<p><code>Svc::ActiveRateGroup</code> has no state machines.</p>
<h3><a class="anchor" id="autotoc_md139"></a>
3.5 Algorithms</h3>
<p><code>Svc::ActiveRateGroup</code> has no significant algorithms.</p>
<h2><a class="anchor" id="autotoc_md140"></a>
4. Dictionaries</h2>
<p>Dictionaries: <a href="ActiveRateGroup.html">HTML</a> MD</p>
<h2><a class="anchor" id="autotoc_md141"></a>
5. Module Checklists</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Document  </th><th class="markdownTableHeadNone">Link   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Design Checklist  </td><td class="markdownTableBodyNone"><a href="Checklist_Design.xlsx">Link</a>   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Code Checklist  </td><td class="markdownTableBodyNone"><a href="Checklist_Code.xlsx">Link</a>   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Unit Test Checklist  </td><td class="markdownTableBodyNone"><a href="Checklist_Unit_Test.xlsx">Link</a>   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md142"></a>
6. Unit Testing</h2>
<p>The unit test results are as follows:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Log  </th><th class="markdownTableHeadNone">Link   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Test Output  </td><td class="markdownTableBodyNone"><a href="../test/ut/output/test.txt">Link</a>   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Coverage Output  </td><td class="markdownTableBodyNone"><a href="../test/ut/output/ActiveRateGroupImpl.cpp.gcov">Link</a>   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md143"></a>
7. Change Log</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Date  </th><th class="markdownTableHeadNone">Description   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">6/22/2015  </td><td class="markdownTableBodyNone">Design review edits   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">7/22/2015  </td><td class="markdownTableBodyNone">Design review actions   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">8/10/2015  </td><td class="markdownTableBodyNone">Updated to cycle input port   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">8/31/2015  </td><td class="markdownTableBodyNone">Unit test review updates   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md431"></a>
Svc::RateGroupDriver Component</h1>
<h2><a class="anchor" id="autotoc_md432"></a>
1. Introduction</h2>
<p>The RateGroupDriver Component is used to take a single system tick and distribute it to multiple rate groups in a system. It takes the input <code>Svc::Sched</code> port, then divides down the tick rate based on arguments to the constructor. Typically, the output ports would be connected to the asynchronous inputs of an <code>ActiveRateGroup</code>.</p>
<h2><a class="anchor" id="autotoc_md433"></a>
2. Requirements</h2>
<p>The requirements for RateGroupDriver are as follows:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Requirement  </th><th class="markdownTableHeadNone">Description  </th><th class="markdownTableHeadNone">Verification Method   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">RGD-001  </td><td class="markdownTableBodyNone">The 'Svc::RateGroupDriver' component shall divide a primary system tick into the needed rate groups  </td><td class="markdownTableBodyNone">Unit Test   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">RCD-002  </td><td class="markdownTableBodyNone">The 'Svc::RateGroupDriver' component shall be able to run in ISR context  </td><td class="markdownTableBodyNone">Inspection   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md434"></a>
3. Design</h2>
<h3><a class="anchor" id="autotoc_md435"></a>
3.1 Context</h3>
<h4><a class="anchor" id="autotoc_md436"></a>
3.1.1 Component Diagram</h4>
<p>The Svc::RateGroupDriver component has the following component diagram:</p>
<p><img src="img/RateGroupDriverBDD.jpg" alt="RateGroupDriver Diagram" title="RateGroupDriver" class="inline"/></p>
<h4><a class="anchor" id="autotoc_md437"></a>
3.1.2 Ports</h4>
<p>The Svc::RateGroupDriver component uses the following port types:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Port Data Type  </th><th class="markdownTableHeadNone">Name  </th><th class="markdownTableHeadNone">Direction  </th><th class="markdownTableHeadNone">Kind  </th><th class="markdownTableHeadNone">Usage   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="../Sched/docs/sdd.html"><code>Svc::Cycle</code></a>  </td><td class="markdownTableBodyNone">CycleIn  </td><td class="markdownTableBodyNone">Input  </td><td class="markdownTableBodyNone">Synchronous  </td><td class="markdownTableBodyNone">Receive the system tick   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="../Sched/docs/sdd.html"><code>Svc::Cycle</code></a>  </td><td class="markdownTableBodyNone">CycleOut  </td><td class="markdownTableBodyNone">Output  </td><td class="markdownTableBodyNone">n/a  </td><td class="markdownTableBodyNone">Used to drive rate groups   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md438"></a>
3.2 Functional Description</h4>
<p>The Svc::RateGroupDriver component has one input port that receives a system tick. The constructor has an array of integer arguments that specifies the divisors for each output port. </p><pre class="fragment">RateGroupDriverImpl(const char* compName, NATIVE_INT_TYPE dividers[], NATIVE_INT_TYPE numDividers);
</pre><p>The input rate will for each output port will be divided down by the value in the <code>dividers[]</code> array corresponding to the output port number.</p>
<p>The implementation will be ISR compliant by avoiding the following:</p>
<ul>
<li>Floating point calculations</li>
<li>Taking mutexes</li>
<li>Calling libraries with unknown side effects</li>
<li>Long implementation</li>
</ul>
<p>For instance,</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"><code>SchedIn</code> Rate  </th><th class="markdownTableHeadNone"><code>divider[0]</code>  </th><th class="markdownTableHeadNone"><code>SchedOut[0]</code>  </th><th class="markdownTableHeadNone"><code>divider[1]</code>  </th><th class="markdownTableHeadNone"><code>SchedOut[1]</code>  </th><th class="markdownTableHeadNone"><code>divider[2]</code>  </th><th class="markdownTableHeadNone"><code>SchedOut[2]</code>   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1Hz  </td><td class="markdownTableBodyNone">1  </td><td class="markdownTableBodyNone">1Hz  </td><td class="markdownTableBodyNone">2  </td><td class="markdownTableBodyNone">0.5Hz  </td><td class="markdownTableBodyNone">4  </td><td class="markdownTableBodyNone">0.25Hz   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md439"></a>
3.3 Scenarios</h3>
<h4><a class="anchor" id="autotoc_md440"></a>
3.3.1 System Tick Port Call</h4>
<p>As described in the Functional Description section, the RateGroupDriver component accepts calls to the SchedIn and divides them down to the SchedOut ports:</p>
<p><img src="img/RateGroupDriverPortCallSequence.jpg" alt="System Tick Port Call" class="inline"/></p>
<h3><a class="anchor" id="autotoc_md441"></a>
3.4 State</h3>
<p>RateGroupDriver has no state machines.</p>
<h3><a class="anchor" id="autotoc_md442"></a>
3.5 Algorithms</h3>
<p>RateGroupDriver has no significant algorithms.</p>
<h2><a class="anchor" id="autotoc_md443"></a>
4. Dictionary</h2>
<p>No dictionary for this module</p>
<h2><a class="anchor" id="autotoc_md444"></a>
5. Module Checklists</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Document  </th><th class="markdownTableHeadNone">Link   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Design Checklist  </td><td class="markdownTableBodyNone"><a href="Checklist_Design.xlsx">Link</a>   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Code Review Checklist  </td><td class="markdownTableBodyNone"><a href="Checklist_Code.xlsx">Link</a>   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Unit Test Checklist  </td><td class="markdownTableBodyNone"><a href="Checklist_Unit_Test.xlsx">Link</a>   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md445"></a>
6. Unit Testing</h2>
<p><a href="../test/ut/output/test.txt">Unit Test Output</a></p>
<p><a href="../test/ut/output/RateGroupDriverImpl.cpp.gcov">Coverage Output - <code>RateGroupDriverImpl.cpp</code></a></p>
<h2><a class="anchor" id="autotoc_md446"></a>
7. Change Log</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Date  </th><th class="markdownTableHeadNone">Description   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">6/19/2015  </td><td class="markdownTableBodyNone">Design review edits   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">7/22/2015  </td><td class="markdownTableBodyNone">Design review actions   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">9/2/2015  </td><td class="markdownTableBodyNone">Unit test updates   </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="svc.html">Svc Compontents Ports and Classes</a></li>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.19 </li>
  </ul>
</div>
</body>
</html>
