

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>fprime.common.models.serialize.time_type &mdash; fprime 1.4.1 documentation</title>
  

  
  <link rel="stylesheet" href="../../../../../static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../static/css/rtd_width.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../../../static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../static/documentation_options.js"></script>
        <script src="../../../../../static/jquery.js"></script>
        <script src="../../../../../static/underscore.js"></script>
        <script src="../../../../../static/doctools.js"></script>
        <script src="../../../../../static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../../../static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../../index.html" class="icon icon-home" alt="Documentation Home"> fprime
          

          
          </a>

          
            
            
              <div class="version">
                1.4.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../api/index.html">API</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">fprime</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../../index.html">Module code</a> &raquo;</li>
        
      <li>fprime.common.models.serialize.time_type</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for fprime.common.models.serialize.time_type</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">@file time_tag.py</span>
<span class="sd">@brief Class used to parse and store time tags sent with serialized data</span>

<span class="sd">This Class is used to parse, store, and create human readable strings for the</span>
<span class="sd">time tags sent with serialized data in the fprime architecture.</span>

<span class="sd">@date Created Dec 16, 2015</span>
<span class="sd">@author: dinkel</span>

<span class="sd">@date Updated June 18, 2018</span>
<span class="sd">@author R. Joseph Paetz (rpaetz@jpl.nasa.gov)</span>

<span class="sd">@date Updated July 22, 2019</span>
<span class="sd">@author Kevin C Oran (kevin.c.oran@jpl.nasa.gov)</span>

<span class="sd">@bug No known bugs</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Enum</span>

<span class="c1"># Custom Python Modules</span>
<span class="kn">import</span> <span class="nn">fprime.common.models.serialize.numerical_types</span>
<span class="kn">from</span> <span class="nn">fprime.common.models.serialize</span> <span class="kn">import</span> <span class="n">type_base</span>
<span class="kn">from</span> <span class="nn">fprime.common.models.serialize.type_exceptions</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">TypeException</span><span class="p">,</span>
    <span class="n">TypeRangeException</span><span class="p">,</span>
<span class="p">)</span>

<div class="viewcode-block" id="TimeBase"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeBase">[docs]</a><span class="n">TimeBase</span> <span class="o">=</span> <span class="n">Enum</span><span class="p">(</span>
    <span class="s2">&quot;TimeBase&quot;</span><span class="p">,</span>
    <span class="c1"># No time base has been established</span>
    <span class="p">{</span>
        <span class="s2">&quot;TB_NONE&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="c1"># Processor cycle time. Not tried to external time</span>
        <span class="s2">&quot;TB_PROC_TIME&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="c1"># Time on workstation where software is running. For testing.</span>
        <span class="s2">&quot;TB_WORKSTATION_TIME&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="c1"># Time as reported by the SCLK.</span>
        <span class="s2">&quot;TB_SC_TIME&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="c1"># Time as reported by the FPGA clock</span>
        <span class="s2">&quot;TB_FPGA_TIME&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
        <span class="c1"># Don&#39;t care value for sequences</span>
        <span class="s2">&quot;TB_DONT_CARE&quot;</span><span class="p">:</span> <span class="mh">0xFFFF</span><span class="p">,</span></div>
    <span class="p">},</span>
<span class="p">)</span>


<div class="viewcode-block" id="TimeType"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType">[docs]</a><span class="k">class</span> <span class="nc">TimeType</span><span class="p">(</span><span class="n">type_base</span><span class="o">.</span><span class="n">BaseType</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Representation of the time type</span>

<span class="sd">    Used to parse, store, and create human readable versions of the time tags</span>
<span class="sd">    included in serialized output from fprime_gds systems</span>

<span class="sd">    Note: comparisons support comparing to numbers or other instances of TimeType. If comparing to</span>
<span class="sd">    another TimeType, these comparisons use the provided compare method. See TimeType.compare for</span>
<span class="sd">    a description of this behavior.  See comparison functions at the end.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time_base</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">time_context</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">seconds</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">useconds</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor</span>

<span class="sd">        Args</span>
<span class="sd">            time_base (int): Time base index for the time tag. Must be a valid</span>
<span class="sd">                             integer for a TimeBase Enum value.</span>
<span class="sd">            time_context (int): Time context for the time tag</span>
<span class="sd">            seconds (int): Seconds elapsed since specified time base</span>
<span class="sd">            useconds (int): Microseconds since start of current second. Must</span>
<span class="sd">                            be in range [0, 999999] inclusive</span>

<span class="sd">        Returns:</span>
<span class="sd">            An initialized TimeType object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Layout of time tag:</span>
        <span class="c1">#</span>
        <span class="c1"># START (LSB)</span>
        <span class="c1"># |  2 bytes  |    1 byte    | 4 bytes |   4 bytes    |</span>
        <span class="c1"># |-----------|--------------|---------|--------------|</span>
        <span class="c1"># | Time Base | Time Context | Seconds | Microseconds |</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_time_base</span><span class="p">(</span><span class="n">time_base</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_useconds</span><span class="p">(</span><span class="n">useconds</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__timeBase</span> <span class="o">=</span> <span class="n">fprime</span><span class="o">.</span><span class="n">common</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">serialize</span><span class="o">.</span><span class="n">numerical_types</span><span class="o">.</span><span class="n">U16Type</span><span class="p">(</span>
            <span class="n">time_base</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__timeContext</span> <span class="o">=</span> <span class="n">fprime</span><span class="o">.</span><span class="n">common</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">serialize</span><span class="o">.</span><span class="n">numerical_types</span><span class="o">.</span><span class="n">U8Type</span><span class="p">(</span>
            <span class="n">time_context</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__secs</span> <span class="o">=</span> <span class="n">fprime</span><span class="o">.</span><span class="n">common</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">serialize</span><span class="o">.</span><span class="n">numerical_types</span><span class="o">.</span><span class="n">U32Type</span><span class="p">(</span><span class="n">seconds</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__usecs</span> <span class="o">=</span> <span class="n">fprime</span><span class="o">.</span><span class="n">common</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">serialize</span><span class="o">.</span><span class="n">numerical_types</span><span class="o">.</span><span class="n">U32Type</span><span class="p">(</span><span class="n">useconds</span><span class="p">)</span>

<div class="viewcode-block" id="TimeType._check_useconds"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType._check_useconds">[docs]</a>    <span class="k">def</span> <span class="nf">_check_useconds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">useconds</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if a given microsecond value is valid.</span>

<span class="sd">        Args:</span>
<span class="sd">            usecs (int): The value to check</span>

<span class="sd">        Returns:</span>
<span class="sd">            None if valid, raises TypeRangeException if not valid.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">useconds</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">useconds</span> <span class="o">&gt;</span> <span class="mi">999999</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">TypeRangeException</span><span class="p">(</span><span class="n">useconds</span><span class="p">)</span></div>

<div class="viewcode-block" id="TimeType._check_time_base"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType._check_time_base">[docs]</a>    <span class="k">def</span> <span class="nf">_check_time_base</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time_base</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if a given TimeBase value is valid.</span>

<span class="sd">        Args:</span>
<span class="sd">            time_base (int): The value to check</span>

<span class="sd">        Returns:</span>
<span class="sd">            Returns if valid, raises TypeRangeException if not valid.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Construct list of possible values for TimeBase enum</span>
        <span class="n">valid_vals</span> <span class="o">=</span> <span class="p">[</span><span class="n">member</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">member</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">TimeBase</span><span class="p">)]</span>

        <span class="k">if</span> <span class="n">time_base</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">valid_vals</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">TypeRangeException</span><span class="p">(</span><span class="n">time_base</span><span class="p">)</span></div>

<div class="viewcode-block" id="TimeType.to_jsonable"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType.to_jsonable">[docs]</a>    <span class="k">def</span> <span class="nf">to_jsonable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        JSONable object format</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">(),</span>
            <span class="s2">&quot;base&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">__timeBase</span><span class="p">,</span>
            <span class="s2">&quot;context&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">__timeContext</span><span class="p">,</span>
            <span class="s2">&quot;seconds&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">seconds</span><span class="p">,</span>
            <span class="s2">&quot;microseconds&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">useconds</span><span class="p">,</span></div>
        <span class="p">}</span>

    <span class="nd">@property</span>
<div class="viewcode-block" id="TimeType.timeBase"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType.timeBase">[docs]</a>    <span class="k">def</span> <span class="nf">timeBase</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">TimeBase</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__timeBase</span><span class="o">.</span><span class="n">val</span><span class="p">)</span></div>

    <span class="nd">@timeBase</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">timeBase</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_time_base</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__timeBase</span> <span class="o">=</span> <span class="n">fprime</span><span class="o">.</span><span class="n">common</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">serialize</span><span class="o">.</span><span class="n">numerical_types</span><span class="o">.</span><span class="n">U16Type</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>

    <span class="nd">@property</span>
<div class="viewcode-block" id="TimeType.timeContext"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType.timeContext">[docs]</a>    <span class="k">def</span> <span class="nf">timeContext</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__timeContext</span><span class="o">.</span><span class="n">val</span></div>

    <span class="nd">@timeContext</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">timeContext</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__timeContext</span> <span class="o">=</span> <span class="n">fprime</span><span class="o">.</span><span class="n">common</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">serialize</span><span class="o">.</span><span class="n">numerical_types</span><span class="o">.</span><span class="n">U8Type</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>

    <span class="nd">@property</span>
<div class="viewcode-block" id="TimeType.seconds"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType.seconds">[docs]</a>    <span class="k">def</span> <span class="nf">seconds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__secs</span><span class="o">.</span><span class="n">val</span></div>

    <span class="nd">@seconds</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">seconds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__secs</span> <span class="o">=</span> <span class="n">fprime</span><span class="o">.</span><span class="n">common</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">serialize</span><span class="o">.</span><span class="n">numerical_types</span><span class="o">.</span><span class="n">U32Type</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>

    <span class="nd">@property</span>
<div class="viewcode-block" id="TimeType.useconds"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType.useconds">[docs]</a>    <span class="k">def</span> <span class="nf">useconds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__usecs</span><span class="o">.</span><span class="n">val</span></div>

    <span class="nd">@useconds</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">useconds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_useconds</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__usecs</span> <span class="o">=</span> <span class="n">fprime</span><span class="o">.</span><span class="n">common</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">serialize</span><span class="o">.</span><span class="n">numerical_types</span><span class="o">.</span><span class="n">U32Type</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>

<div class="viewcode-block" id="TimeType.serialize"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType.serialize">[docs]</a>    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serializes the time type</span>

<span class="sd">        Returns:</span>
<span class="sd">            Byte array containing serialized time type</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">buf</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
        <span class="n">buf</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__timeBase</span><span class="o">.</span><span class="n">serialize</span><span class="p">()</span>
        <span class="n">buf</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__timeContext</span><span class="o">.</span><span class="n">serialize</span><span class="p">()</span>
        <span class="n">buf</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__secs</span><span class="o">.</span><span class="n">serialize</span><span class="p">()</span>
        <span class="n">buf</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__usecs</span><span class="o">.</span><span class="n">serialize</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">buf</span></div>

<div class="viewcode-block" id="TimeType.deserialize"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType.deserialize">[docs]</a>    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">offset</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deserializes a serialized time type in data starting at offset.</span>

<span class="sd">        Internal values to the object are updated.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: binary data containing the time tag (type = bytearray)</span>
<span class="sd">            offset: Index in data where time tag starts</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Decode Time Base</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__timeBase</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">offset</span><span class="p">)</span>
        <span class="n">offset</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__timeBase</span><span class="o">.</span><span class="n">getSize</span><span class="p">()</span>

        <span class="c1"># Decode Time Context</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__timeContext</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">offset</span><span class="p">)</span>
        <span class="n">offset</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__timeContext</span><span class="o">.</span><span class="n">getSize</span><span class="p">()</span>

        <span class="c1"># Decode Seconds</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__secs</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">offset</span><span class="p">)</span>
        <span class="n">offset</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__secs</span><span class="o">.</span><span class="n">getSize</span><span class="p">()</span>

        <span class="c1"># Decode Microseconds</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__usecs</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">offset</span><span class="p">)</span>
        <span class="n">offset</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__usecs</span><span class="o">.</span><span class="n">getSize</span><span class="p">()</span></div>

<div class="viewcode-block" id="TimeType.getSize"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType.getSize">[docs]</a>    <span class="k">def</span> <span class="nf">getSize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the size of the time type object when serialized</span>

<span class="sd">        Returns:</span>
<span class="sd">            The size of the time type object when serialized</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__timeBase</span><span class="o">.</span><span class="n">getSize</span><span class="p">()</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">__timeContext</span><span class="o">.</span><span class="n">getSize</span><span class="p">()</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">__secs</span><span class="o">.</span><span class="n">getSize</span><span class="p">()</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">__usecs</span><span class="o">.</span><span class="n">getSize</span><span class="p">()</span></div>
        <span class="p">)</span>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="TimeType.compare"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType.compare">[docs]</a>    <span class="k">def</span> <span class="nf">compare</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Compares two TimeType objects</span>

<span class="sd">        This function sorts times in the order of: timeBase, secs, usecs, and</span>
<span class="sd">        then timeContext.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Negative, 0, or positive for t1&lt;t2, t1==t2, t1&gt;t2 respectively</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">cmp</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span><span class="p">)</span>  <span class="c1"># added to support Python 2/3</span>

        <span class="c1"># Compare Base</span>
        <span class="n">base_cmp</span> <span class="o">=</span> <span class="nb">cmp</span><span class="p">(</span><span class="n">t1</span><span class="o">.</span><span class="n">timeBase</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">t2</span><span class="o">.</span><span class="n">timeBase</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">base_cmp</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">base_cmp</span>

        <span class="c1"># Compare seconds</span>
        <span class="n">sec_cmp</span> <span class="o">=</span> <span class="nb">cmp</span><span class="p">(</span><span class="n">t1</span><span class="o">.</span><span class="n">seconds</span><span class="p">,</span> <span class="n">t2</span><span class="o">.</span><span class="n">seconds</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">sec_cmp</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">sec_cmp</span>

        <span class="c1"># Compare usecs</span>
        <span class="n">usec_cmp</span> <span class="o">=</span> <span class="nb">cmp</span><span class="p">(</span><span class="n">t1</span><span class="o">.</span><span class="n">useconds</span><span class="p">,</span> <span class="n">t2</span><span class="o">.</span><span class="n">useconds</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">usec_cmp</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">usec_cmp</span>

        <span class="c1"># Compare contexts</span>
        <span class="k">return</span> <span class="nb">cmp</span><span class="p">(</span><span class="n">t1</span><span class="o">.</span><span class="n">timeContext</span><span class="p">,</span> <span class="n">t2</span><span class="o">.</span><span class="n">timeContext</span><span class="p">)</span></div>

<div class="viewcode-block" id="TimeType.__str__"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType.__str__">[docs]</a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Formats the time type object for printing</span>

<span class="sd">        Returns:</span>
<span class="sd">            A string representing the time type object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;(</span><span class="si">%d</span><span class="s2">(</span><span class="si">%d</span><span class="s2">)-</span><span class="si">%d</span><span class="s2">:</span><span class="si">%d</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__timeBase</span><span class="o">.</span><span class="n">val</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__timeContext</span><span class="o">.</span><span class="n">val</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__secs</span><span class="o">.</span><span class="n">val</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__usecs</span><span class="o">.</span><span class="n">val</span><span class="p">,</span></div>
        <span class="p">)</span>

<div class="viewcode-block" id="TimeType.to_readable"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType.to_readable">[docs]</a>    <span class="k">def</span> <span class="nf">to_readable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time_zone</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a string of the time object in a human readable format</span>

<span class="sd">        Args:</span>
<span class="sd">            time_zone (tzinfo): Time zone to convert the TimeType</span>
<span class="sd">                      object to before printing. Timezone also displayed.</span>
<span class="sd">                      If time_zone=None, local timezone is used.</span>
<span class="sd">                      Defaults to None.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A human readable string reperesenting the time type object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_datetime</span><span class="p">(</span><span class="n">time_zone</span><span class="p">)</span>

        <span class="c1"># If we could convert to a valid datetime, use that, otherwise, format</span>
        <span class="k">if</span> <span class="n">dt</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S%z&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">: </span><span class="si">%d</span><span class="s2">.</span><span class="si">%06d</span><span class="s2">s, context=</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="n">TimeBase</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__timeBase</span><span class="o">.</span><span class="n">val</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__secs</span><span class="o">.</span><span class="n">val</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__usecs</span><span class="o">.</span><span class="n">val</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__timeContext</span><span class="o">.</span><span class="n">val</span><span class="p">,</span></div>
            <span class="p">)</span>

<div class="viewcode-block" id="TimeType.get_datetime"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType.get_datetime">[docs]</a>    <span class="k">def</span> <span class="nf">get_datetime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the python datetime object for UTC time</span>

<span class="sd">        Args:</span>
<span class="sd">            tz (tzinfo): timezone to create the datetime object</span>
<span class="sd">               in. If tz=None, local time zone used. Defaults to None.</span>
<span class="sd">        Returns:</span>
<span class="sd">            datetime object for the time type or None if the time couldn&#39;t</span>
<span class="sd">            be determined.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">tb</span> <span class="o">=</span> <span class="n">TimeBase</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__timeBase</span><span class="o">.</span><span class="n">val</span><span class="p">)</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">tb</span> <span class="o">==</span> <span class="n">TimeBase</span><span class="p">[</span><span class="s2">&quot;TB_WORKSTATION_TIME&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="n">tb</span> <span class="o">==</span> <span class="n">TimeBase</span><span class="p">[</span><span class="s2">&quot;TB_SC_TIME&quot;</span><span class="p">]:</span>

            <span class="c1"># This finds the local time corresponding to the timestamp and</span>
            <span class="c1"># timezone object, or local time zone if tz=None</span>
            <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__secs</span><span class="o">.</span><span class="n">val</span><span class="p">,</span> <span class="n">tz</span><span class="p">)</span>

            <span class="n">dt</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">microsecond</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__usecs</span><span class="o">.</span><span class="n">val</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">dt</span></div>

<div class="viewcode-block" id="TimeType.set_datetime"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType.set_datetime">[docs]</a>    <span class="k">def</span> <span class="nf">set_datetime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">time_base</span><span class="o">=</span><span class="mh">0xFFFF</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the timebase from a datetime object.</span>

<span class="sd">        Args:</span>
<span class="sd">            dt (datetime): datetime object to read from time.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">total_seconds</span> <span class="o">=</span> <span class="p">(</span><span class="n">dt</span> <span class="o">-</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>
        <span class="n">seconds</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">total_seconds</span><span class="p">)</span>
        <span class="n">useconds</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">total_seconds</span> <span class="o">-</span> <span class="n">seconds</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000000</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_time_base</span><span class="p">(</span><span class="n">time_base</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_useconds</span><span class="p">(</span><span class="n">useconds</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__timeBase</span> <span class="o">=</span> <span class="n">fprime</span><span class="o">.</span><span class="n">common</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">serialize</span><span class="o">.</span><span class="n">numerical_types</span><span class="o">.</span><span class="n">U16Type</span><span class="p">(</span>
            <span class="n">time_base</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__secs</span> <span class="o">=</span> <span class="n">fprime</span><span class="o">.</span><span class="n">common</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">serialize</span><span class="o">.</span><span class="n">numerical_types</span><span class="o">.</span><span class="n">U32Type</span><span class="p">(</span><span class="n">seconds</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__usecs</span> <span class="o">=</span> <span class="n">fprime</span><span class="o">.</span><span class="n">common</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">serialize</span><span class="o">.</span><span class="n">numerical_types</span><span class="o">.</span><span class="n">U32Type</span><span class="p">(</span><span class="n">useconds</span><span class="p">)</span></div>

    <span class="c1"># The following Python special methods add support for rich comparison of TimeTypes to other</span>
    <span class="c1"># TimeTypes and numbers.</span>

<div class="viewcode-block" id="TimeType.get_float"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType.get_float">[docs]</a>    <span class="k">def</span> <span class="nf">get_float</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        a helper method that gets the current TimeType as a float where the non-fraction is seconds</span>
<span class="sd">        and the fraction is microseconds. This enables comparisons with numbers.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">seconds</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">useconds</span> <span class="o">/</span> <span class="mi">1000000</span><span class="p">)</span></div>

<div class="viewcode-block" id="TimeType.__lt__"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType.__lt__">[docs]</a>    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Less than &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TimeType</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_float</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">other</span></div>

<div class="viewcode-block" id="TimeType.__le__"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType.__le__">[docs]</a>    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Less than or equal &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TimeType</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_float</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="n">other</span></div>

<div class="viewcode-block" id="TimeType.__eq__"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType.__eq__">[docs]</a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Equal  &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TimeType</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_float</span><span class="p">()</span> <span class="o">==</span> <span class="n">other</span></div>

<div class="viewcode-block" id="TimeType.__ne__"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType.__ne__">[docs]</a>    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Not equal &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TimeType</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_float</span><span class="p">()</span> <span class="o">!=</span> <span class="n">other</span></div>

<div class="viewcode-block" id="TimeType.__gt__"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType.__gt__">[docs]</a>    <span class="k">def</span> <span class="fm">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Greater than &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TimeType</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_float</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">other</span></div>

<div class="viewcode-block" id="TimeType.__ge__"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType.__ge__">[docs]</a>    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Greater than or equal &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TimeType</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_float</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="n">other</span></div>

    <span class="c1"># The following helper methods enable support for arithmetic operations on TimeTypes.</span>

<div class="viewcode-block" id="TimeType.set_float"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType.set_float">[docs]</a>    <span class="k">def</span> <span class="nf">set_float</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        a helper method that takes a float and sets a TimeType&#39;s seconds and useconds fields.</span>
<span class="sd">        Note: This method is private because it is only used by the _get_type_from_float helper to</span>
<span class="sd">        generate new TimeType instances. It is not meant to be used to modify an existing timestamp.</span>
<span class="sd">        Note: Present implementation will set any negative result to 0</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">num</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seconds</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">num</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">useconds</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">((</span><span class="n">num</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">seconds</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000000</span><span class="p">))</span></div>

<div class="viewcode-block" id="TimeType.get_type_from_float"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType.get_type_from_float">[docs]</a>    <span class="k">def</span> <span class="nf">get_type_from_float</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        a helper method that returns a new instance of TimeType and sets the seconds and useconds</span>
<span class="sd">        fields using the given number. The new TimeType&#39;s time_base and time_context will be</span>
<span class="sd">        preserved from the calling object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tType</span> <span class="o">=</span> <span class="n">TimeType</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__timeBase</span><span class="o">.</span><span class="n">val</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__timeContext</span><span class="o">.</span><span class="n">val</span><span class="p">)</span>
        <span class="n">tType</span><span class="o">.</span><span class="n">set_float</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tType</span></div>

    <span class="c1"># The following Python special methods add support for arithmetic operations on TimeTypes.</span>

<div class="viewcode-block" id="TimeType.__add__"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType.__add__">[docs]</a>    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Addition &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TimeType</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">get_float</span><span class="p">()</span>
        <span class="n">num</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_float</span><span class="p">()</span> <span class="o">+</span> <span class="n">other</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_type_from_float</span><span class="p">(</span><span class="n">num</span><span class="p">)</span></div>

<div class="viewcode-block" id="TimeType.__sub__"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType.__sub__">[docs]</a>    <span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Subtraction &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TimeType</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">get_float</span><span class="p">()</span>
        <span class="n">num</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_float</span><span class="p">()</span> <span class="o">-</span> <span class="n">other</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_type_from_float</span><span class="p">(</span><span class="n">num</span><span class="p">)</span></div>

<div class="viewcode-block" id="TimeType.__mul__"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType.__mul__">[docs]</a>    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Multiplication &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TimeType</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">get_float</span><span class="p">()</span>
        <span class="n">num</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_float</span><span class="p">()</span> <span class="o">*</span> <span class="n">other</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_type_from_float</span><span class="p">(</span><span class="n">num</span><span class="p">)</span></div>

<div class="viewcode-block" id="TimeType.__truediv__"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType.__truediv__">[docs]</a>    <span class="k">def</span> <span class="fm">__truediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; True division &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TimeType</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">get_float</span><span class="p">()</span>
        <span class="n">num</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_float</span><span class="p">()</span> <span class="o">/</span> <span class="n">other</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_type_from_float</span><span class="p">(</span><span class="n">num</span><span class="p">)</span></div>

<div class="viewcode-block" id="TimeType.__floordiv__"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType.__floordiv__">[docs]</a>    <span class="k">def</span> <span class="fm">__floordiv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Floored divisionv &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TimeType</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">get_float</span><span class="p">()</span>
        <span class="n">num</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_float</span><span class="p">()</span> <span class="o">//</span> <span class="n">other</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_type_from_float</span><span class="p">(</span><span class="n">num</span><span class="p">)</span></div>

    <span class="c1"># The following Python special methods add support for reflected arithmetic operations on TimeTypes.</span>

<div class="viewcode-block" id="TimeType.__radd__"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType.__radd__">[docs]</a>    <span class="k">def</span> <span class="fm">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Reflected addition &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TimeType</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">get_float</span><span class="p">()</span>
        <span class="n">num</span> <span class="o">=</span> <span class="n">other</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_float</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_type_from_float</span><span class="p">(</span><span class="n">num</span><span class="p">)</span></div>

<div class="viewcode-block" id="TimeType.__rsub__"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType.__rsub__">[docs]</a>    <span class="k">def</span> <span class="fm">__rsub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Reflected subtraction &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TimeType</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">get_float</span><span class="p">()</span>
        <span class="n">num</span> <span class="o">=</span> <span class="n">other</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_float</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_type_from_float</span><span class="p">(</span><span class="n">num</span><span class="p">)</span></div>

<div class="viewcode-block" id="TimeType.__rmul__"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType.__rmul__">[docs]</a>    <span class="k">def</span> <span class="fm">__rmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Reflected multiplication &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TimeType</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">get_float</span><span class="p">()</span>
        <span class="n">num</span> <span class="o">=</span> <span class="n">other</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_float</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_type_from_float</span><span class="p">(</span><span class="n">num</span><span class="p">)</span></div>

<div class="viewcode-block" id="TimeType.__rtruediv__"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType.__rtruediv__">[docs]</a>    <span class="k">def</span> <span class="fm">__rtruediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Reflected division &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TimeType</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">get_float</span><span class="p">()</span>
        <span class="n">num</span> <span class="o">=</span> <span class="n">other</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_float</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_type_from_float</span><span class="p">(</span><span class="n">num</span><span class="p">)</span></div>

<div class="viewcode-block" id="TimeType.__rfloordiv__"><a class="viewcode-back" href="../../../../../api/fprime/common/models/serialize/time_type/index.html#fprime.common.models.serialize.time_type.TimeType.__rfloordiv__">[docs]</a>    <span class="k">def</span> <span class="fm">__rfloordiv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Reflected floored division &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">TimeType</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">get_float</span><span class="p">()</span>
        <span class="n">num</span> <span class="o">=</span> <span class="n">other</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_float</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_type_from_float</span><span class="p">(</span><span class="n">num</span><span class="p">)</span></div></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Michael Starch

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>
